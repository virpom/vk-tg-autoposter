# ü§ñ VK-TG Auto Poster

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∏–∑ VK –≤ Telegram –∫–∞–Ω–∞–ª —Å –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π –ø—Ä–µ–¥–ª–æ–∂–µ–∫, –≥–∏–±–∫–∏–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º –∏ —É–¥–æ–±–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ –±–æ—Ç–∞.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üì• **–ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ VK** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∏–∑ VK –ø–∞–±–ª–∏–∫–∞
- üìÇ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—Ä—Ö–∏–≤–∞** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- üí° **–ü—Ä–µ–¥–ª–æ–∂–∫–∞** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø—Ä–∏—Å—ã–ª–∞—Ç—å —Ñ–æ—Ç–æ –±–æ—Ç—É, –∞–¥–º–∏–Ω –º–æ–¥–µ—Ä–∏—Ä—É–µ—Ç
- ‚è∞ **–ì–∏–±–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ** ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∏–ª–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª
- üåô **–¢–∏—Ö–∏–µ —á–∞—Å—ã** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–∞—É–∑–∞ –Ω–æ—á—å—é
- ‚úèÔ∏è **–ü–æ–¥–ø–∏—Å–∏ –∫ –ø–æ—Å—Ç–∞–º** ‚Äî HTML-—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å—Å—ã–ª–∫–∏
- üîò **–ö–Ω–æ–ø–∫–∏ –ø–æ–¥ –ø–æ—Å—Ç–∞–º–∏** ‚Äî –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∞ —Å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–æ–π
- üîî **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** ‚Äî –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –∞–¥–º–∏–Ω—É –æ –ø—É–±–ª–∏–∫–∞—Ü–∏—è—Ö
- üéØ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã** ‚Äî –ø—Ä–µ–¥–ª–æ–∂–∫–∏ ‚Üí VK ‚Üí –∞—Ä—Ö–∏–≤
- üö´ **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è** ‚Äî –ø–æ MD5-—Ö–µ—à—É, –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–æ–≤

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose
- Telegram Bot Token (–æ—Ç [@BotFather](https://t.me/BotFather))
- VK Service Token (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ VK)
- Telegram –∫–∞–Ω–∞–ª —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –±–æ—Ç–∞

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
git clone https://github.com/your-repo/vk-tg-autoposter.git
cd vk-tg-autoposter
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞

```bash
cp .env.example .env
nano .env  # –∏–ª–∏ –ª—é–±–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
# === TELEGRAM ===
TG_BOT_TOKEN=123456789:AABBccDDeeFFggHH...
TG_CHANNEL_ID=@your_channel
TG_ADMIN_ID=123456789

# === VK (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ===
VK_TOKEN=vk1.a.xxxxxxxx...
VK_GROUP_DOMAIN=your_vk_group

# === –ü–£–¢–ò ===
DB_PATH=/app/data/queue.db
QUEUE_PATH=/app/photos/queue
ARCHIVE_PATH=/app/photos/archive
```

### 3. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–∞–ø–æ–∫

```bash
mkdir -p photos/archive photos/queue data
```

### 4. –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ö–∏–≤–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π:

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤ –ø–∞–ø–∫—É archive
cp -r /path/to/your/photos/* photos/archive/

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ)
docker compose run --rm bot python scripts/init_archive.py
```

### 5. –ó–∞–ø—É—Å–∫

```bash
docker compose up -d
```

### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
docker logs vk-tg-bot
```

–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
```
‚úÖ Database initialized
üìÖ Scheduled: 06:00 local
üìÖ Scheduled: 15:00 local
üìÖ Scheduled: 22:00 local
‚úÖ Bot started
```

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞

### –î–ª—è –∞–¥–º–∏–Ω–∞

–ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É `/start` ‚Äî –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:

- **üöÄ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–µ–π—á–∞—Å** ‚Äî –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è
- **üëÅ –ü—Ä–µ–≤—å—é** ‚Äî –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ—Å—Ç–∞
- **üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** ‚Äî –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—á–µ—Ä–µ–¥–∏
- **üì¨ –ü—Ä–µ–¥–ª–æ–∂–∫–∏** ‚Äî –º–æ–¥–µ—Ä–∞—Ü–∏—è –ø—Ä–∏—Å–ª–∞–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ
- **‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Äî –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞
- **‚è∏ –ü–∞—É–∑–∞** ‚Äî –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–≤—Ç–æ–ø–æ—Å—Ç–∏–Ω–≥

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ –±–æ—Ç–∞

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ –º–µ–Ω—é **‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏**:

#### üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
- –†–µ–∂–∏–º: —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∏–ª–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª
- –í—Ä–µ–º—è –ø–æ—Å—Ç–∏–Ω–≥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 06:00,15:00,22:00)
- –ò–Ω—Ç–µ—Ä–≤–∞–ª –≤ —á–∞—Å–∞—Ö
- –¢–∏—Ö–∏–µ —á–∞—Å—ã (–∫–æ–≥–¥–∞ –Ω–µ –ø–æ—Å—Ç–∏—Ç—å)
- –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å

#### üñº –ü–æ—Å—Ç—ã
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ –≤ –ø–æ—Å—Ç–µ (1-10)
- –ü–æ—Ä—è–¥–æ–∫: –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É –∏–ª–∏ —Å–ª—É—á–∞–π–Ω—ã–π

#### ‚úèÔ∏è –ü–æ–¥–ø–∏—Å–∏
- –†–µ–∂–∏–º: –Ω–∏–∫–æ–≥–¥–∞ / –≤—Å–µ–≥–¥–∞ / –∫–∞–∂–¥—ã–π N-–π / —Ä–∞–∑ –≤ –¥–µ–Ω—å
- –¢–µ–∫—Å—Ç –ø–æ–¥–ø–∏—Å–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π HTML

#### üîò –ö–Ω–æ–ø–∫–∞ –ø–æ–¥ –ø–æ—Å—Ç–æ–º
- –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
- URL —Å—Å—ã–ª–∫–∏

#### üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –í–∫–ª/–≤—ã–∫–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—É–±–ª–∏–∫–∞—Ü–∏—è—Ö

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–õ—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ –±–æ—Ç—É ‚Äî –æ–Ω–æ –ø–æ–ø–∞–¥—ë—Ç –≤ –ø—Ä–µ–¥–ª–æ–∂–∫—É –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
vk-tg-autoposter/
‚îú‚îÄ‚îÄ docker-compose.yml    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker
‚îú‚îÄ‚îÄ Dockerfile            # –û–±—Ä–∞–∑ Python
‚îú‚îÄ‚îÄ requirements.txt      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ .env                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Å–æ–∑–¥–∞—Ç—å!)
‚îú‚îÄ‚îÄ .env.example          # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ bot.py           # Telegram –±–æ—Ç (–≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª)
‚îÇ   ‚îú‚îÄ‚îÄ vk_fetcher.py    # –ü–∞—Ä—Å–µ—Ä VK (–∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞)
‚îÇ   ‚îú‚îÄ‚îÄ settings.py      # –ú–µ–Ω–µ–¥–∂–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îÇ   ‚îî‚îÄ‚îÄ init_archive.py  # –ó–∞–≥—Ä—É–∑—á–∏–∫ –∞—Ä—Ö–∏–≤–∞ –≤ –ë–î
‚îÇ
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îî‚îÄ‚îÄ init_db.py       # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SQLite
‚îÇ
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ queue.db         # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ
‚îî‚îÄ‚îÄ photos/
    ‚îú‚îÄ‚îÄ archive/         # –í–∞—à –∞—Ä—Ö–∏–≤ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
    ‚îî‚îÄ‚îÄ queue/           # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–ø—Ä–µ–¥–ª–æ–∂–∫–∏)
```

## üóÉ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

SQLite –±–∞–∑–∞ —Ö—Ä–∞–Ω–∏—Ç –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è—Ö –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö.

### –¢–∞–±–ª–∏—Ü–∞ `queue` ‚Äî –æ—á–µ—Ä–µ–¥—å –ø—É–±–ª–∏–∫–∞—Ü–∏–π

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | INTEGER | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| file_path | TEXT | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É |
| file_hash | TEXT | MD5-—Ö–µ—à (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π) |
| source | TEXT | –ò—Å—Ç–æ—á–Ω–∏–∫: `vk`, `archive`, `suggestion` |
| status | TEXT | –°—Ç–∞—Ç—É—Å: `pending`, `approved` |
| posted | INTEGER | –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ: 0 –∏–ª–∏ 1 |
| created_at | TIMESTAMP | –î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è |

### –¢–∞–±–ª–∏—Ü–∞ `settings` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–•—Ä–∞–Ω–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ:

| –ö–ª—é—á | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------|----------|--------------|
| schedule_mode | –†–µ–∂–∏–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è | `fixed` |
| fixed_times | –í—Ä–µ–º—è –ø–æ—Å—Ç–∏–Ω–≥–∞ | `06:00,15:00,22:00` |
| interval_hours | –ò–Ω—Ç–µ—Ä–≤–∞–ª (—á–∞—Å—ã) | `4` |
| quiet_hours_start | –ù–∞—á–∞–ª–æ —Ç–∏—Ö–∏—Ö —á–∞—Å–æ–≤ | `23` |
| quiet_hours_end | –ö–æ–Ω–µ—Ü —Ç–∏—Ö–∏—Ö —á–∞—Å–æ–≤ | `6` |
| timezone_offset | –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å (UTC+) | `7` |
| photos_per_post | –§–æ—Ç–æ –≤ –ø–æ—Å—Ç–µ | `6` |
| caption_mode | –†–µ–∂–∏–º –ø–æ–¥–ø–∏—Å–µ–π | `never` |
| caption_text | –¢–µ–∫—Å—Ç –ø–æ–¥–ø–∏—Å–∏ | ‚Äî |
| inline_button_text | –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ | ‚Äî |
| inline_button_url | URL –∫–Ω–æ–ø–∫–∏ | ‚Äî |
| post_order | –ü–æ—Ä—è–¥–æ–∫ –ø–æ—Å—Ç–æ–≤ | `priority` |
| notify_on_post | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | `false` |
| is_paused | –ù–∞ –ø–∞—É–∑–µ | `false` |

### –¢–∞–±–ª–∏—Ü–∞ `pending_suggestions` ‚Äî –ø—Ä–µ–¥–ª–æ–∂–∫–∏

| –ü–æ–ª–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| id | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| file_path | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É |
| user_id | Telegram ID –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è |
| username | Username –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è |
| created_at | –î–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ |

## üîß Docker –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker compose up -d

# –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –±–æ—Ç–∞
docker compose up -d bot

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker compose down

# –õ–æ–≥–∏ –±–æ—Ç–∞ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏)
docker logs -f vk-tg-bot

# –õ–æ–≥–∏ VK –ø–∞—Ä—Å–µ—Ä–∞
docker logs -f vk-fetcher

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
docker compose restart bot

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞
docker compose up -d --build bot

# –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec -it vk-tg-bot python scripts/init_archive.py
```

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º
sqlite3 data/queue.db "SELECT source, COUNT(*) FROM queue WHERE posted=0 GROUP BY source"

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö
sqlite3 data/queue.db "SELECT COUNT(*) FROM queue WHERE posted=1"

# –û—á–∏—Å—Ç–∏—Ç—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏
sqlite3 data/queue.db "DELETE FROM queue WHERE posted=1"

# –ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–±—Ä–æ—Å–∏—Ç—å –æ—á–µ—Ä–µ–¥—å
sqlite3 data/queue.db "DELETE FROM queue"

# –°–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
sqlite3 data/queue.db "DELETE FROM settings"

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∞—Ä—Ö–∏–≤ –≤ –æ—á–µ—Ä–µ–¥—å
docker exec vk-tg-bot python scripts/init_archive.py
```

## üîí –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

### Telegram Bot Token

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –í–≤–µ–¥–∏—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è –±–æ—Ç–∞
4. –í–≤–µ–¥–∏—Ç–µ username –±–æ—Ç–∞ (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `bot`)
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω

### Telegram Admin ID

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@userinfobot](https://t.me/userinfobot) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à —á–∏—Å–ª–æ–≤–æ–π ID

### VK Service Token

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://vk.com/apps?act=manage
2. –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
3. –¢–∏–ø: **Standalone-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
4. –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **–°–µ—Ä–≤–∏—Å–Ω—ã–π –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞**

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –∫–∞–Ω–∞–ª–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –∫–∞–Ω–∞–ª –≤ Telegram (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–Ω–∞–ª–∞ ‚Üí –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã
3. –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
4. –î–∞–π—Ç–µ –ø—Ä–∞–≤–∞: **–ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π**
5. –í `.env` —É–∫–∞–∂–∏—Ç–µ `@username_–∫–∞–Ω–∞–ª–∞` –∏–ª–∏ —á–∏—Å–ª–æ–≤–æ–π ID (–¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤)

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å ID –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞:**
1. –ü–µ—Ä–µ—à–ª–∏—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞ –±–æ—Ç—É [@userinfobot](https://t.me/userinfobot)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID (–±—É–¥–µ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º)

## ‚ùì –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ë–æ—Ç –Ω–µ –ø—É–±–ª–∏–∫—É–µ—Ç —Ñ–æ—Ç–æ

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –∫–∞–Ω–∞–ª–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —É –±–æ—Ç–∞ –µ—Å—Ç—å –ø—Ä–∞–≤–æ "–ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π"
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `TG_CHANNEL_ID` —É–∫–∞–∑–∞–Ω –≤–µ—Ä–Ω–æ (@username –∏–ª–∏ ID)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker logs vk-tg-bot`

### –û—à–∏–±–∫–∞ "Timed out"

–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ –∏–ª–∏ –º–µ–¥–ª–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ. –†–µ—à–µ–Ω–∏—è:
- –£–º–µ–Ω—å—à–∏—Ç–µ `photos_per_post` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- Timeout —É–∂–µ —É–≤–µ–ª–∏—á–µ–Ω –¥–æ 60 —Å–µ–∫—É–Ω–¥ –≤ –∫–æ–¥–µ

### –§–æ—Ç–æ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ VK

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `VK_TOKEN` –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ VK –ø–∞–±–ª–∏–∫ –æ—Ç–∫—Ä—ã—Ç—ã–π (–Ω–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `VK_GROUP_DOMAIN` (—Ç–æ–ª—å–∫–æ –∫–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è, –±–µ–∑ `vk.com/`)
4. –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏: `docker logs vk-fetcher`

### –û—à–∏–±–∫–∞ "Conflict: terminated by other getUpdates"

–î–≤–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –±–æ—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å –æ–¥–Ω–∏–º —Ç–æ–∫–µ–Ω–æ–º. –†–µ—à–µ–Ω–∏–µ:
```bash
docker compose down
sleep 10
docker compose up -d
```

### –§–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã (exists: False)

–ü—É—Ç–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ–º —Ñ–∞–π–ª–æ–≤.
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É—Ç–∏ –≤ –ë–î
sqlite3 data/queue.db "SELECT file_path FROM queue LIMIT 5"

# –î–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å /app/photos/
# –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –∏—Å–ø—Ä–∞–≤–∏—Ç—å:
sqlite3 data/queue.db "UPDATE queue SET file_path = REPLACE(file_path, '/old/path', '/app/photos')"
```

### –ö–∞–∫ —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏?

```bash
sqlite3 data/queue.db "DELETE FROM settings"
docker compose restart bot
```

## üöö –ü–µ—Ä–µ–Ω–æ—Å –Ω–∞ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–µ—Ä

1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã: `docker compose down`
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å—é –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏—Å—å:
   - `.env` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
   - `data/queue.db` ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
   - `photos/` ‚Äî –≤—Å–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
4. –ù–∞ –Ω–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ: `docker compose up -d`

## üìä –†–∞—Å—á—ë—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞

–ü—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö:
- 6 —Ñ–æ—Ç–æ –≤ –ø–æ—Å—Ç–µ
- 3 –ø–æ—Å—Ç–∞ –≤ –¥–µ–Ω—å (06:00, 15:00, 22:00)

**18 —Ñ–æ—Ç–æ –≤ –¥–µ–Ω—å** ‚Üí 2000 —Ñ–æ—Ç–æ —Ö–≤–∞—Ç–∏—Ç –Ω–∞ **~111 –¥–Ω–µ–π**

## üîÑ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

–ü—Ä–∏ –≤–∫–ª—é—á—ë–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ "–ü–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É":

1. **üí° –ü—Ä–µ–¥–ª–æ–∂–∫–∏** (–æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ) ‚Äî –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏
2. **üîµ VK** (–∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞) ‚Äî –∑–∞—Ç–µ–º –Ω–æ–≤—ã–µ –∏–∑ VK
3. **üìÇ –ê—Ä—Ö–∏–≤** (–≤–∞—à–∏ —Ñ–æ—Ç–æ) ‚Äî –≤ –ø–æ—Å–ª–µ–¥–Ω—é—é –æ—á–µ—Ä–µ–¥—å

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—Å–µ–≥–¥–∞ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–≤–µ–∂–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

## üìù –§–æ—Ä–º–∞—Ç –ø–æ–¥–ø–∏—Å–µ–π

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è HTML-—Ä–∞–∑–º–µ—Ç–∫–∞:

```html
<b>–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç</b>
<i>–ö—É—Ä—Å–∏–≤</i>
<u>–ü–æ–¥—á—ë—Ä–∫–Ω—É—Ç—ã–π</u>
<s>–ó–∞—á—ë—Ä–∫–Ω—É—Ç—ã–π</s>
<code>–ú–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π</code>
<a href="https://example.com">–°—Å—ã–ª–∫–∞</a>
```

–ü—Ä–∏–º–µ—Ä –ø–æ–¥–ø–∏—Å–∏:
```html
üê± –ü–æ–¥–ø–∏—Å—ã–≤–∞–π—Å—è: <a href="https://t.me/your_channel">@your_channel</a>
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ.

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É.

---

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞**
